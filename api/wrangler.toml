name = "web-presence-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# D1 Database Configuration
[[d1_databases]]
binding = "DB"
database_name = "web-presence-db-local"
database_id = "a298a621-daa5-4001-b2b7-863ff2523a0e"

# R2 Bucket Configuration
[[r2_buckets]]
binding = "PROTECTED_CONTENT_BUCKET"
bucket_name = "protected-content"

# Environment-specific configurations
[env.development]
name = "web-presence-api-dev"
[[env.development.d1_databases]]
binding = "DB"
database_name = "web-presence-db-local"
database_id = "a298a621-daa5-4001-b2b7-863ff2523a0e"

[env.production]
name = "web-presence-api"
[[env.production.d1_databases]]
binding = "DB"
database_name = "web-presence-db"
database_id = "22aaa0c4-8060-4417-9649-9cc8cafa7e06"

# Build configuration
# Note: Wrangler handles TypeScript compilation automatically
# No custom build command needed to avoid circular dependencies

# Environment Variables Configuration
# 
# Local Development:
# - Uses .dev.vars file for environment variables
# - Variables: INTERNAL_API_KEY
# 
# Production:
# - Uses Cloudflare Workers secrets
# - Set via: npx wrangler secret put <SECRET_NAME>
# 
# Required Variables:
# - INTERNAL_API_KEY: API key for internal endpoints (build script, admin operations)
# 
# Database Configuration:
# - Local: web-presence-db-local (ID: a298a621-daa5-4001-b2b7-863ff2523a0e)
# - Production: web-presence-db (ID: 22aaa0c4-8060-4417-9649-9cc8cafa7e06)
